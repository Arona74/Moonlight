solved some concurrency issues with map data