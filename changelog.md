quite some internal refactors and cleanups. Fixed some inconsistencies with configs