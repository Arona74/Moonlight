fixed some bugs with the newly added system